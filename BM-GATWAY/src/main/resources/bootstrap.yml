# 配置端口号
server:
  port: 8090

spring:
  main:
    web-application-type: reactive
  #  datasource:
#    url: jdbc:mysql://localhost:3306/nacos
#    username: commander
#    password: 123456
#    type: com.alibaba.druid.pool.DruidDataSource
  application:
    name: bm-gateway-service
#  profiles:
#    active: dev
  cloud:
    nacos:
      discovery:
        server-addr: 127.0.0.1:8848
        username: nacos
        password: nacos
        namespace: public

    gateway:

      routes:
        - id: user_route
          uri: lb://bm-user-service

          predicates:
            - Path=/user-serv/**
          filters:
            - StripPrefix=1
            - PrefixPath=/users

        - id: book_route
          uri: lb://bm-book-service

          predicates:
            - Path=/book-serv/**
          filters:
            - StripPrefix=1
            - PrefixPath=/book

        - id: order_route
          uri: lb://bm-order-service

          predicates:
            - Path=/order-serv/**
          filters:
            - StripPrefix=1
            - PrefixPath=/order

        - id: borrow_route
          uri: lb://bm-borrow-service

          predicates:
            - Path=/borrow-serv/**
          filters:
            - StripPrefix=1
            - PrefixPath=/borrow

        - id: pre_book_route
          uri: lb://bm-pre-book-service

          predicates:
            - Path=/pre-book-serv/**
          filters:
            - StripPrefix=1

        - id: donate_route
          uri: lb://bm-donate-service

          predicates:
            - Path=/donate-serv/**
          filters:
            - StripPrefix=1
            - PrefixPath=/donate